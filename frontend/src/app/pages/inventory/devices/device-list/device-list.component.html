<nz-table nzShowSizeChanger
          [nzData]="entities()"
          [nzFrontPagination]="false"
          [nzLoading]="entitiesLoading()"
          [nzTotal]="total()"
          [nzPageSize]="itemsPerPage"
          [nzPageIndex]="page"
          (nzQueryParams)="onQueryParamsChange($event)">
  <thead>
  <tr>
    <th nzColumnKey="id">ID</th>
    <th nzColumnKey="name">Name</th>
    <th nzColumnKey="state">Zustand</th>
    <th nzColumnKey="location">Standort/Fahrzeug</th>
    <th nzColumnKey="type">Typ</th>
    <th nzColumnKey="group">Gruppe</th>
    <th nzColumnKey="manufactor">Hersteller</th>
    <th nzColumnKey="dealer">HÃ¤ndler</th>
    <th *ofsHasRole="['device.manage']"></th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let entity of entities()" nz-typography>
    <td>{{ entity.id }}</td>
    <td>{{ entity.name }}</td>
    <td>{{ DeviceTypes.getById(entity.state)?.name }}</td>
    <td>
      <ng-container *ngIf="entity.location; else noLocation">
        {{ entity.location.name }}
        <ng-container *ngIf="entity.location.parent">
          ({{ entity.location.parent.name }})
        </ng-container>
      </ng-container>
      <ng-template #noLocation>
        <i>kein Standort/Fahrzeug</i>
      </ng-template>
    </td>
    <td>
      <ng-container *ngIf="entity.type; else noType">
        {{ entity.type.name }}
      </ng-container>
      <ng-template #noType>
        <i>kein Typ</i>
      </ng-template>
    </td>
    <td>
      <ng-container *ngIf="entity.group; else noGroup">
        {{ entity.group.name }}
      </ng-container>
      <ng-template #noGroup>
        <i>keine Gruppe</i>
      </ng-template>
    </td>
    <td>
      <ng-container *ngIf="entity.type; else noTypeManufactor">
        <ng-container *ngIf="entity.type.manufactor && entity.type.manufactor.trim()!==''; else unknownTypeManufactor">
          {{ entity.type.manufactor }}
        </ng-container>
      </ng-container>
      <ng-template #noTypeManufactor>
        <ng-container *ngIf="entity.manufactor && entity.manufactor.trim()!==''; else unknownTypeManufactor">
          {{ entity.manufactor }}
        </ng-container>
      </ng-template>
      <ng-template #unknownTypeManufactor>
        <i>unbekannt</i>
      </ng-template>
    </td>
    <td>
      <ng-container *ngIf="entity.type; else noTypeDealer">
        <ng-container *ngIf="entity.type.dealer && entity.type.dealer.trim()!==''; else unknownTypeDealer">
          {{ entity.type.dealer }}
        </ng-container>
      </ng-container>
      <ng-template #noTypeDealer>
        <ng-container *ngIf="entity.dealer && entity.dealer.trim()!==''; else unknownTypeDealer">
          {{ entity.dealer }}
        </ng-container>
      </ng-template>
      <ng-template #unknownTypeDealer>
        <i>unbekannt</i>
      </ng-template>
    </td>
    <td *ofsHasRole="['device.manage']">
      <a nz-button nzType="link" [routerLink]="entity.id.toString()">Details</a>
    </td>
  </tr>
  </tbody>
</nz-table>
